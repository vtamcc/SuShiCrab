{"version":3,"sources":["assets\\SuShiCarb\\scripts\\Game\\ShuShiCarb.Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport ShuShiCarbGame from \"../ShuShiCarb.Game\";\r\nimport Global from \"../ShuShiCarb.Global\";\r\nimport ShuShiCarbFood from \"./ShuShiCarb.Food\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ShuShiCarbPlayer extends cc.Component {\r\n\r\n    public static instace: ShuShiCarbPlayer = null;\r\n    @property(sp.Skeleton)\r\n    char: sp.Skeleton = null;\r\n    @property(cc.Node)\r\n    listFood: cc.Node[] = [];\r\n    @property(cc.Node)\r\n    nchat: cc.Node = null;\r\n    @property(sp.SkeletonData)\r\n    listCharacter: sp.SkeletonData[] = [];\r\n    @property(cc.ProgressBar)\r\n    prgBarCountDown: cc.ProgressBar = null;\r\n    @property(cc.Label)\r\n    lbCountDown: cc.Label = null;\r\n    @property(cc.Node)\r\n    nTime: cc.Node = null;\r\n    numberCountDown = 0;\r\n    isCountDown = false;\r\n    isMove = false;\r\n    isAtOrderPosition = false;\r\n    \r\n    // @property(cc.Node)\r\n    // foodItem1: cc.Node = null;\r\n    // @property(cc.Node)\r\n    // foodItem2: cc.Node = null;\r\n    // @property(cc.Node)\r\n    // foodItem3: cc.Node = null;\r\n\r\n    onLoad() {\r\n        ShuShiCarbPlayer.instace = this;\r\n        let timeIndex = cc.sys.localStorage.getItem(\"timeIndex\") || 0;\r\n        let timeUpdate = Global.dataTimeHappy[timeIndex].time;\r\n        Global.timeHappy += timeUpdate;\r\n        console.log(\"Time vua duoc update \",Global.timeHappy);\r\n    }\r\n    setData(index) {\r\n        this.char.skeletonData = this.listCharacter[index]; // listChar [0] = con ao vang\r\n    }\r\n\r\n    startCountDown() {\r\n        this.isCountDown = true;\r\n        this.numberCountDown = Global.timeHappy;\r\n        this.schedule(this.updateCountDown,1);\r\n    }\r\n\r\n    \r\n    updateCountDown() {\r\n        if(this.numberCountDown > 0) {\r\n            this.numberCountDown--;\r\n            this.updateProgressBar();\r\n            this.lbCountDown.string = this.numberCountDown + '';\r\n        }else {\r\n            this.isCountDown = false;\r\n            ShuShiCarbGame.instance.resetGame(false);\r\n            console.log(\"Thua\")\r\n            //this.effectShow();\r\n\r\n        }\r\n    }\r\n\r\n    updateProgressBar() {\r\n        if(this.prgBarCountDown) {\r\n            this.prgBarCountDown.progress -= 1/ Global.timeHappy;\r\n        }\r\n    }\r\n    effectShow() {\r\n        this.char.animation = 'move';\r\n        this.nchat.active = false;\r\n        this.nTime.active = false;\r\n        cc.tween(this.char.node)\r\n        .to(2, {x: 0})\r\n        .call(() => {\r\n            this.char.animation = 'idle';\r\n            this.nchat.active = true;\r\n            this.nTime.active = true;\r\n            this.isAtOrderPosition = true;\r\n            this.startCountDown();\r\n        })\r\n        .start()\r\n    }\r\n\r\n    happyEffectPlayerMoveOut(callbacks: Function) {\r\n        // this.char.setAnimation(0,\"happy_out\",active);\r\n        // this.char.setAnimation(0,\"discomfort\",!active);\r\n        this.char.animation = \"happy\"\r\n        this.isAtOrderPosition = false;\r\n        cc.tween(this.char.node)\r\n        .to(0.8,{x: 600})\r\n        .call(() => {\r\n            this.node.destroy();\r\n            callbacks();\r\n        }).start();\r\n    }\r\n\r\n    sadEffectPlayerMoveOut(callbacks: Function) {\r\n        // this.char.setAnimation(0,\"happy_out\",active);\r\n        // this.char.setAnimation(0,\"discomfort\",!active);\r\n        this.char.animation = \"discomfort\"\r\n        this.isAtOrderPosition = false;\r\n        cc.tween(this.char.node)\r\n        .to(0.8,{x: 600})\r\n        .call(() => {\r\n            this.isAtOrderPosition = false;\r\n            this.node.destroy();\r\n            callbacks();\r\n        }).start();\r\n    }\r\n\r\n    \r\n\r\n\r\n    start () {  \r\n        this.effectShow();\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}